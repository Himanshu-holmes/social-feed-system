# Social Feed System

A toy social feed system built with Go, gRPC, GraphQL, and in-memory data storage.

## ðŸ§  Design Decisions

### 1. In-Memory Store
- Fast and ideal for simulation/testing.
- No persistence for now, perfect for rapid prototyping.
- Data is initialized once using `populateMockData()` for predictable test results.

### 2. Post Aggregation Logic
- A userâ€™s timeline is generated by aggregating the posts of followed users.
- Each user's posts are pre-sorted in reverse chronological order during initialization.
- Concurrency is used to fetch posts from multiple followed users using goroutines and channels.

### 3. Timeline Constraints
- Limit to 20 most recent posts.
- Sorted in reverse chronological order.
- Handles context cancellation gracefully to avoid memory leaks or blocked goroutines.

### 4. gRPC + GraphQL
- gRPC is used internally for fast microservice communication.
- GraphQL provides flexibility on the frontend/API layer.

## ðŸ§ª Unit Testing
Basic unit tests include:
- Timeline correctness based on follow data.
- Post limit enforcement.
- Sorting validation.
- Cancellation context test for graceful degradation.

To run tests:

```bash
go test ./cmd/post_service/server
```

## Makefile
### Run service in foreground
```bash
make run-foreground
```

### Run service in background
```bash
make run
tail -f posts.log # view logs
```

### Stop service
```bash
make stop
```

### Build binaries
```bash
make build
```

### Build binaries for different platforms
```bash
make build-cross
```
